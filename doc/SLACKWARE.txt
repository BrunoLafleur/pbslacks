Installation de la distribution Linux Slackware current du 1er juillet 2019
Linux Pierre Brochard 2019-07-05T13:45:24Z

Installation en dual boot avec le windows 10 pro d'origine

========================================================================
Activation du Windows 10 fourni (si pas d√©j√† fait ou si le portable est
tout neuf comme ici).

Se connecter sous Windows et v√©rifier que l'activation est bien termin√©e
et finalis√©e en allant dans le panneau de configuration.

Lors de l'installation Windows demande un mot de passe puis permet l'usage d'un
code √† 4 chiffres. Il faut bien retenir les 2. Le code n'est pas suffisant lors
des √©tapes ci-dessous.

A noter que Windows 10 crypte ses partitions avec Bitlocker.
========================================================================
Sous Windows, faire de la place sur le ou les disques durs.

Cette op√©ration permet de r√©tr√©cir la place allou√©e √† Windows.

On mettra Linux sur la place r√©cup√©r√©e.

Cette op√©ration doit se faire sous Windows pour √©viter les probl√®mes li√©s √† 
Bitlocker. Ou avec GParted si la partition Windows est d√©crypt√©e.

Sous Windows, il faut donc:

    Lancer une console (d√©marrer rechercher command ou cmd, puis en mode
administrateur)
    Taper diskmgmt.msc (lance une application fen√™tr√©e)
    Choisir la ou les partitions √† r√©duire (les plus grosses - ne pas toucher
aux autres)
    Avec le bouton de droite de la souris choisir R√©duire le volume
    Donner la taille √† r√©cup√©rer (laisser au moins 10 % d'espace libre sur ce
qu'il reste)
    Cliquer sur r√©duire

Si l'on veut enlever le cryptage Bitlocker sur les partitions Windows restantes,
il faut dans la console en mode administrateur taper :

    manage-bde -off c:
========================================================================
Il faut ensuite pr√©parer Windows pour pouvoir changer RAID en AHCI dans le BIOS
de la machine. Ensuite il faut :

    Revenir dans une console en mode administrateur.
    Taper : bcdedit /set {current} safeboot minimal
    Red√©marrer l'ordinateur et entrer dans le BIOS (en tapant F12 ou F2 au tout
d√©but).
    Chercher le menu SATA et changer Raid en AHCI.
    Sauvegarder et sortir du BIOS (Window red√©marre en mode sans √©chec et
demande le mot de passe au lieu du code obtenu lors de l'installation de
Windows).
    Recherche √† nouveau une console en mode administrateur (si le champ
recherche du menu d√©marrer ne marche pas, prendre celui du gestionnaire du
fichier)
    Tapez : bcdedit /deletevalue {current} safeboot
    R√©d√©marrer sous Windows et il devrait fonctionner en AHCI.
    Pour √™tre sur de ne pas √™tre en mode hibernation en arr√™tant Windows (qui
ne relira pas les nouvelles partitions du ou des disques durs ou SSD si on les
modifie avec un partitionneur Linux et les abimera - ci-dessus on a utilis√© le
partitionneur Windows pour faire de la place ce qui √©vite aussi ce probl√®me),
recherchez √† nouveau une console en mode administrateur et tapez :
    powercfg /h off
    Arr√™tez la machine

A noter que les commandes Windows ci-dessous doivent r√©pondre que tout s'est
bien pass√©, ou rendre la main sans message d'erreurs, avant d'aller plus loin.
========================================================================
Revenez dans le BIOS comme ci-dessus.
D√©sactivez "Secureboot" dans le BIOS sinon la Slackware aura du mal √†
d√©marrer sur sa cl√© USB.

Si on d√©sire repartitionner ou r√©duire une ou plusieurs partitions Windows par
un outil Linux comme gparted (au lieu de le faire comme vu plus haut sous
Windows), il existe une version live que l'on peut mettre sur un DVD ou une
cl√© USB.

Si on retaille avec ces outils Linux des partitions qui concernent Windows, il
faut √™tre sur que Windows n'est pas √©t√© arr√™t√© en mode d'hibernation (voir
plus haut).

A d√©faut, faire la manip suivante sous Slackware apr√®s l'avoir install√©e et
avant de red√©marrer Windows o√π sdXN d√©signe la partition o√π est install√© 
Windows :

    ntfsfix /dev/sdXN
    mount -t ntfs-3g /dev/sdXN /mnt -o remove_hiberfile

Windows red√©marrera compl√©tement et relira les informations de partitionnement
de disque.
========================================================================
Utilisez BrunoLafleur/pbslacks sur github pour t√©l√©charger Linux Slackware
current sur l'un des miroirs r√©f√©renc√©s par le site officiel de Slackware.

Toujours avec BrunoLafleur/pbslacks, t√©l√©charger aussi le mode de
compatibilit√© 32 bits de Alien Bob (ici ou sur un mirroir).

Et ramener aussi firefox et thunderbird en fran√ßais sur le site de Mozilla.

Ramener download crazybee.sh et les paquets proposes par pbslacks.
========================================================================
Faire une cl√© USB avec tout ce qu'on a ramen√© avec :
BrunoLafleur/pbslacks/pbmakeusb.
========================================================================
On installe la Slackware que l'on vient de mettre sur la cl√© USB.

    On d√©marre le PC avec la cl√© que l'on vient de faire (F12 et boot USB)
    On se connecte root (mot de passe vide)
    On lance parted et on cr√©e 4 partitions sur les espaces r√©cup√©r√©s sous 
Window (help, mkpart) :
    La partition qui sera '/' d'environ 30 √† 50 Go.
    La partition qui sera '/var' d'environ 10 Go.
    La partition qui sera le swap d'environ 10 Go.
    Le reste qui sera '/home'.

On tape ensuite la commande setup.

On suit ensuite la proc√©dure d'installation en entier en utilisant les
partitions que l'on vient de cr√©er (on installe tout - on ne met pas de mot
de passe maintenant pour root). On choisit KDE comme bureau (ou celui que l'on
pr√©ferre).

A la fin, on lui dit d'installer elilo et on sort du setup et on red√©marre
(directement sous Linux - pour l'instant on ne voit plus Windows qui est
toujours l√†).
========================================================================
On installe les paquets additionnels avec BrunoLafleur/pbslacks/pbupgrade.

Qui installe refind-0.11.2-x86_64-1_slonly.txz r√©cup√©rer le boot Windows et le
boot Linux. Lancez ensuite :

    /usr/share/refind-0.11.2/install.sh
    On red√©marre et on tombe sur le menu de refind avec une ic√¥ne pour Windows 
√† gauche et une pour Linux √† c√¥t√© (les autres boutons n'ont pas d'int√©r√™t).
    On s√©lectionne avec la fl√®che droite le bouton Linux et on appuie sur
entr√©e.

Une fois sous Linux, on est en mode console. On se connecte root (mot de passe
vide).

    On lance startx et on laisse Xorg se lancer. On le quitte avec le menu de
fond.
    Dans la console on tape :
    cp /usr/share/X11/xorg.conf.d/90-* /etc/X11/xorg.conf.d
    On √©dite cette copie : vi /etc/X11/xorg.conf.d/90-*
    On remplace en par fr, on sauvegarde et on quitte vi.
    On relance startx et on ressort.
    On met un mot de passe pour root (passwd).
    On cr√©e un utilisateur XXXXX (adduser - r√©pondre oui pour les groupes
propos√©s).
    Dans /etc/inittab, on met 4 √† la place de 3 dans : id:3:initdefault:
    On red√©marre ou on tape : telinit 4
========================================================================
Sur ce portable DELL, on a une deuxi√®me carte graphique NVIDIA qui peut √™tre
activ√©e en √©tant root.
Avec BrunoLafleur/pbslacks/pbupgrade :

    Lancez compilebumblebe ou upgradebumblebee si Bumblebee a d√©j√† √
√©t√© recompil√© avec la nouvelle Slackware.

Red√©marrer sous Linux et tester avec : primusrun command
les commandes dont on veut un affichage optimis√©.
